# Laravel Lesson レビュー①

## Todo一覧機能

### Todoモデルのallメソッドで実行しているSQLは何か
・SELECT*FROM todos でtodosテーブルから全てのレコードを取得する。
### Todoモデルのallメソッドの返り値は何か
・Collectionクラスのインスタンスが返り値です。
　Collectionインスタンスの中にはTodoインスタンスが格納されています。
### 配列の代わりにCollectionクラスを使用するメリットは
・Collectionクラスを使用するメリットは、Collectionインスタンスは配列操作に特化したクラスで、配列と同じような格納方法ができ、条件表示・並び替えなどテーブルを効果的かる柔軟に処理するためのクラスです。
### view関数の第1・第2引数の指定と何をしているか
・view関数の第1・第2引数で指定したviewをPHPで実行し、HTMLの生成。
　画面に表示したいview名を第1引数で指定し、第2引数に渡したいデータを連想配列の形で渡すことができます。
　第2引数の連想配列は、[blade内での変数名=>代入したい値]という記述方法になります。
### index.blade.phpの$todos・$todoに代入されているものは何か
・view関数で第2引数で指定されたデータがview内で使用できる変数に代入されます。
　$todosが全てのtodoデータ、$todoはforeachの処理内で$todosから抽出したtodoデータです。
## Todo作成機能

### Requestクラスのallメソッドは何をしているか
・HTTPリスエストで送信された全てのデータを連想配列として取得している。
### fillメソッドは何をしているか
・Todoインスタンスの各プロパティに一括で代入します。
### $fillableは何のために設定しているか
・fill()には脆弱性があり、対策をせずに使用すると悪意のあるユーザに攻撃されてしまう恐れがあるため、fillableという記述方法で、第三者からの意図しないカラムが更新されるのを防ぐことができます。
### saveメソッドで実行しているSQLは何か
・saveメソッドが実行するとINSERT文でデータが追加されます。
### redirect()->route()は何をしているか
・routeメゾットを使用し、第1引数はrouteを定義した名前を記述することで、指定したページへリダイレクトさせることができます。
## その他

### テーブル構成をマイグレーションファイルで管理するメリット
・SQLを知らなくても、PHPコードでテーブル操作ができ、マイグレーションファイルをGitで共有することで開発者全員が同じテーブルを作成することができます。
### マイグレーションファイルのup()、down()は何のコマンドを実行した時に呼び出されるのか
・up()は「php artisan migration」で呼び出され、テーブル作成・カラムの追加、編集を記述します。
　downは()は「php artisan migration:rollback」で呼び出され、up()で追加したデータを取り消します。
### Seederクラスの役割は何か
・データベースにテストデータを一斉に登録する処理を行うクラスです。
### route関数の引数・返り値・使用するメリット
・web.php内の「Route::get('/todo','TodoController@index')」で第1引数にはリダイレクト先、第2引数Contorollerとそのメゾットを指定することによってそのルートのURLを作れます。
　また、「->name('todo.index')」を追記することで上記のルートに対応するUPLに名前を定義することができ、returnで返り値を指定する際の可読性の向上につながります。
### @extends・@section・@yieldの関係性とbladeを分割するメリット
・親テンプレートとなる（base.blade.php）部分に@yield('文字列')を記述して内容を埋め込む、子テンプレートに@extends('\resources\views以降のパス')を使うことで親テンプレートを継続します。
　子テンプレート内で@section('文字列')を使うことで親テンプレートの@yeild('文字列')に、対応した内容を埋め込むことができ、分割するメリットとしては複数のbladeを組み合わせてHTMLを生成することが可能です。
　また、重複するコードを共有化することで再利用性、保守性も向上します。
### @csrfは何のための記述か
・CSRF攻撃の対策として記述します。
　自動的にCSRFトークンを生成し、フォームの隠しフィールドに埋め込まれ、送信させるリクエストに正しいトークンが埋め込まれ、セッションに入っているトークンの値と一致しているか、サーバーで検証されるという変化があります。
### {{ }}とは何の省略系か
・{{ }}を使用することで、その部分がPHPの処理として認識され、エスケープ処理もします。エスケープすることで、第三者がtodoを登録した際、悪意にあるコードで「<,>,',"」を使用しても文字列として登録されるのでXSS攻撃を防ぐことができます。